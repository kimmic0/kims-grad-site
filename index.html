<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="icon" href="comp.svg" type="image/svg"> 
  <title>Kim‚Äôs Graduation üéì</title>
  <link href="https://fonts.googleapis.com/css2?family=DotGothic16&family=Asap+Condensed&family=Monsieur+La+Doulaise&family=Alumni+Sans&family=Silkscreen&family=Libre+Bodoni:wght@400;700&display=swap" rel="stylesheet">

<style>
  /* === Invitation Launch Page === */
#launch-screen {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: radial-gradient(circle, #000 60%, #111);
  color: white;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
  z-index: 999999; /* on top of everything */
  cursor: pointer;
  animation: fadeIn 1s ease forwards;
}
/* === Black Seal === */
.seal {
  width: 90px;
  height: 90px;
  background: radial-gradient(circle at 30% 30%, #222, #000 80%);
  border-radius: 50%;
  box-shadow: 
    inset 0 0 10px #555,
    0 0 20px rgba(0,0,0,0.8);
  margin-top: 40px;
  position: relative;
  cursor: pointer;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.seal::after {
  content: "K";
  font-family: 'Libre Bodoni', serif;
  font-weight: 700;
  font-size: 2.5rem;
  color: #ccc;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -55%);
  text-shadow: 0 0 5px #111;
}
.seal:hover {
  transform: scale(1.05);
  box-shadow: 
    inset 0 0 15px #666,
    0 0 25px rgba(255,255,255,0.1);
}

.invite-box {
  text-align: center;
  animation: float 2s ease-in-out infinite alternate;
}

#launch-screen h1 {
  font-family: 'Monsieur La Doulaise', cursive;
  margin: 0 auto;
  margin-bottom: 20px;
  text-shadow: 0 0 10px white;
}

#launch-screen p {
  font-family: 'Alumni Sans', sans-serif;
  font-size: 1.5rem;
  letter-spacing: 1px;
  color: #ddd;
}

.envelope {
  font-size: 5rem;
  margin-top: 20px;
  animation: pulse 1.5s infinite;
}

/* Animations */
@keyframes float {
  from { transform: translateY(-10px); }
  to { transform: translateY(10px); }
}
@keyframes pulse {
  0%, 100% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.2); opacity: 0.7; }
}
@keyframes fadeOut {
  to { opacity: 0; visibility: hidden; }
}

/* --- Base styles --- */
:root{
  --bw-1:#000;
  --bw-2:#111;
  --bw-3:#333;
  --bw-4:#fff;
  --accent:#dedede;
}
body { font-family: 'Alumni Sans'; font-size: 20px; background-color:var(--bw-4); margin:0; color:var(--bw-1); text-align:center; }
header { padding:40px 20px 20px; border-bottom:2px solid var(--bw-1); background-color:var(--bw-4); }
h1 { font-family:'Monsieur La Doulaise', cursive; font-size:20px; margin:0; letter-spacing:1px; max-width: 90%;}
h1 img { display:block; margin:10px auto 0; width:60px; height:auto; }
p { font-size:30px; color:#333; font-weight: bold; margin-top:10px; margin-right:15px }
h2 {  font-size: 38px;  font-family: 'Alumni Sans', sans-serif;  margin-bottom: 20px;}

/* --- Tabs --- */
.tabs { font-family: 'Asap Condensed'; display:flex; justify-content:center; flex-wrap:wrap; background-color:var(--bw-1); padding:10px 0; z-index:10; position:relative; }
.tab { font-family: 'Asap Condensed';background:linear-gradient(120deg,var(--bw-4) 0%, #ccc 30%, var(--bw-4) 50%); background-size:200% auto; color:var(--bw-1); padding:10px 25px; border:2px solid var(--bw-1); margin:5px; border-radius:30px; font-size:24px; cursor:pointer; transition:all .3s ease; }
.tab:hover { animation:shine 1.2s linear infinite; transform:scale(1.05); }
.tab-content { display:none; padding:30px; animation:fadeIn .4s ease; }
.active { display:block; }
@keyframes shine { 0%{background-position:-200% center;}100%{background-position:200% center;} }
@keyframes fadeIn { from{opacity:0} to{opacity:1} }

/* --- Inputs & buttons --- */
input, textarea { border-radius:10px; border:1px solid #aaa; padding:10px; font-size:16px; margin-top:10px; }
input{ width:50%; } textarea{ width:80%; height:100px; }*/
button { border:none; padding:10px 25px; border-radius:30px; background:linear-gradient(120deg,var(--bw-1) 0%, #444 30%, #999 50%, #444 70%, var(--bw-1) 100%); background-size:200% auto; color:var(--bw-4); margin-top:10px; font-size:16px; cursor:pointer; transition:all .3s ease; }
button:hover { animation:shine 1.3s linear infinite; transform:scale(1.05); }

/* --- Gallery --- */
#gallery img { width:200px; height:auto; border-radius:15px; border:2px solid var(--bw-1); margin:10px; transition:transform .3s, opacity .4s; opacity:1; cursor:pointer; }
#gallery img:hover{ transform:scale(1.05); }

/* --- Main / Journey canvas --- */
#main-content { transition:background .5s ease; position:relative; z-index:1; min-height:400px; }
.journey-active { background-color:var(--bw-1); color:var(--bw-4); }
.journey-bg { position:absolute; top:0; left:0; width:100%; height:100%; z-index:0; pointer-events:none;background: transparent;  opacity: 0; transition: opacity 0.4s ease;
             margin: 0; padding: 0;  border: 0;}
.journey-active .journey-bg {opacity: 1;}
/* --- Timeline --- */
.timeline-container {
  width: 100vw;       /* full viewport width */
  max-width: 100%;    /* prevent overflow beyond screen */
  position: relative;
  padding: 60px 0;
  overflow-x: auto;   /* allow horizontal scroll on small screens */
  box-sizing: border-box;
}

.timeline {
  display: flex;
  flex-wrap: wrap;
  flex-direction: row; /* stack points vertically */
  align-items: center; /* align points to the left */
  position: relative;
  height: auto; /* let it expand vertically */
  gap: 40px;
  justify-content: center; /* <-- align to left instead of center */
  padding-left: 20px;          /* optional padding so it doesn‚Äôt stick to edge */
}

.point {
  position: relative;
  width: 20px;
  height: 20px;
  background-color: white;
  border: 2px solid silver;
  border-radius: 50%;
  cursor: pointer;
  transition: transform .3s ease, box-shadow .3s ease;
  flex-shrink: 0;
  z-index: 2;              /* circle stays on top */
}

.point:hover {
  transform: scale(1.2);
  box-shadow: 0 0 12px rgba(200, 200, 200, 0.8);
}
.timeline-led {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 16px;             /* slightly smaller than circle */
  height: 16px;
  border-radius: 50%;
  background-color: white;
  box-shadow: 0 0 16px 8px rgba(255,255,255,0.6); /* soft glow */
  z-index: 1;              /* behind circle but above timeline container */
  pointer-events: none;
  opacity: 0.4;
  transform: translate(-50%, -50%) scale(1);
  transition: opacity .2s ease, transform .2s ease;
}
#journey-display img{ max-width:80%; border-radius:12px; border:2px solid #fff; display:none; margin-top:20px; z-index:3; position:relative; }
#journey-display p{ font-size:1.1em; margin-top:10px; color:#fff; position:relative; z-index:3; }

/* --- Footer --- */
footer{ background-color:var(--bw-1); padding:20px;  font-family:'Dancing Script',cursive; text-align:center; z-index:10; }
/* Neon glow pulse animation */
@keyframes neonPulse {
  0%, 100% {
    text-shadow: 
      0 0 5px #fff,
      0 0 10px #fff,
      0 0 20px #fff,
      0 0 30px #fff;
  }
  50% {
    text-shadow: 
      0 0 8px #fff,
      0 0 16px #fff,
      0 0 24px #fff,
      0 0 40px #fff;
  }
}
footer p {font-size: 1.2em; color: var(--bw-4); margin: 5px 0; animation: neonPulse 1.8s ease-in-out infinite alternate;}

/* --- Lightbox --- */
#lightbox{ display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.85); justify-content:center; align-items:center; z-index:10000; }
#lightbox img{ max-width:90%; max-height:90%; border-radius:15px; border:2px solid #fff; }

#achievements-sidebar h3 {
  margin-top: 0;
  text-align: center;
  font-size: 14px;
  text-decoration: underline;
  color: var(--bw-4);
  letter-spacing: 1px;
}
/* pixel tile for each achievement: square + pixel border */
.achievement {
  background: linear-gradient(180deg,#222 0%, #111 100%);
  padding:6px;
  width: calc(100% - 12px); /* leave padding */
  overflow: visible;         /* ensure text isn‚Äôt clipped */
  border:3px solid #000;
  border-left-width:6px;
  border-top-width:6px;
  border-radius:2px;
  display:flex;
  gap:8px;
  align-items:center;
  justify-content:space-between;
  box-shadow: 3px 3px 0 #000;
  image-rendering: pixelated;
}
.achievement .label { white-space: nowrap;overflow: visible;text-overflow: clip;text-align:left; font-family:monospace; font-size:13px; color:var(--bw-4); }
.achievement .icon {width:34px; height:34px; background:#fff; border:2px solid #000; display:inline-block; margin-right:6px;
  box-shadow: inset 0 0 0 2px #111;image-rendering: pixelated;filter: grayscale(100%);}

/* --- Pixel Minecraft-style toast (center top) --- */
#achievement-toast {
  position:fixed;
  left:50%;
  top:72px;
  transform:translateX(-50%);
  background:#1f1f1f;
  border:4px solid #000;
  color:#fff;
  display:flex;
  align-items:center;
  gap:12px;
  padding:8px 14px;
  border-radius:4px;
  font-family:monospace;
  box-shadow:0 0 10px #000;
  opacity:0;
  z-index:100000;
  transition:opacity .25s ease, top .25s ease;
  image-rendering: pixelated;
}
#achievement-toast .text { text-align:left; line-height:1; }
#achievement-toast .text .title{ font-size:12px; color:#cfcfcf; margin:0; }
#achievement-toast .text .name{ font-size:16px; margin:0; font-weight:700; color:#fff; }
#achievement-toast.show{ opacity:1; top:92px; }

/* --- Confetti & stars (grey + bright white) --- */
.confetti { position:fixed; width:8px; height:8px; background:rgb(173, 172, 172); pointer-events:none; opacity:0.95; z-index:100001; border-radius:2px; transform:translateY(0); }
.sparkle { position:fixed; width:6px; height:6px; background:transparent; pointer-events:none; z-index:100002; border-radius:50%; box-shadow:0 0 8px #fff; opacity:0.9; }
/* Toast bigger on wide screens */
@media (min-width: 1200px) {
  #achievement-toast {
    padding: 16px 28px;  /* bigger toast box */
  }
  #achievement-toast .text .title {
    font-size: 18px;    /* bigger title */
    flex-wrap: wrap;
  }
  #achievement-toast .text .name {
    font-size: 28px;    /* bigger achievement name */
    flex-wrap: wrap;
  }
  #achievement-toast img {
    width: 48px;         /* bigger icon */
    height: 48px;
  }
  header h1 {
    font-size: clamp(1.8rem, 5vw, 4rem);
    word-wrap: break-word;
    white-space: normal;
  }
  h2 { font-size: 2.5rem; }
  p { font-size: 2rem; }
}


/* Tablets / small laptops */
@media (max-width: 1024px){
  h1 { font-size: 4rem; }
  h2 { font-size: 2.5rem; }
  p { font-size: 1.8rem; }
  .tab { font-size: 20px; padding: 8px 16px; }
  #gallery img { max-width: 160px; }
}

/* Phones / very small screens */
@media (max-width: 500px){
  #launch-screen h1 {
    font-size: 4rem;  /* smaller for mobile */
    line-height: 1.2;   /* wrap nicely */
  }
  #launch-screen p {
    font-size: 3rem;
  }
  h1 { font-size: 4rem; }
  h2 { font-size: 3rem; }
  p { font-size: 1.6rem; }
  .tab { font-size: 17px; padding: 6px 12px; }
  input, textarea { width: 95%; }
  #gallery img { max-width: 120px; }
  #journey-display img { max-width: 95%; }
}

/* === Sidebar === */
/* Collapsed sidebar */
#achievement-sidebar {
  position: fixed;
  top: 100px;
  right: 0;
  width: 40px;             /* collapsed width */
  max-height: 80vh;
 background: linear-gradient(to bottom, #111 0%, #000 100%);
  border-left: 3px solid #666;
  padding: 8px 0;
  border-radius: 8px 0 0 8px;
  font-family: "Press Start 2P", monospace;
  color: white;
  z-index: 9999;
  box-shadow: -6px 6px 0 #000 inset;
  transition: all 0.3s ease;
}

/* Expand sidebar on hover */
#achievement-sidebar:hover {
  width: 280px;            /* expand width */
  padding: 8px;            /* add some padding when expanded */
  width: 47%;
}

/* Achievements list inside */
#achievements-list {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.achievement-item {
  background: linear-gradient(90deg, #222 0%, #444 100%);
  margin-bottom: 6px;
  padding: 6px;
  border: 1px solid #777;
  border-radius: 4px;
  box-shadow: 0 0 4px #888;
}

/* === Popup Style === */
#achievement-popup {
  position: fixed;
  bottom: 40px;
  left: 40px;
  display: none;
  animation: slideIn 0.4s ease-out;
  z-index: 10000;
}

#achievement-popup-inner {
  background: linear-gradient(to bottom, #222, #000);
  color: white;
  padding: 10px 20px;
  border: 2px solid #888;
  border-radius: 6px;
  font-family: "Press Start 2P", monospace;
  box-shadow: 0 0 8px #777;
}

#achievement-popup-title {
  color: #bbb;
  font-size: 10px;
  display: block;
  margin-bottom: 6px;
  letter-spacing: 1px;
}

#achievement-popup-text {
  font-size: 12px;
  color: #fff;
  text-shadow: 0 0 4px #aaa;
}

/* === Pixel font === */
@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

/* === Animations === */
@keyframes slideIn {
  from { transform: translateX(-100%); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}

/* === Grey confetti and stars === */
.confetti {
  position: fixed;
  width: 6px;
  height: 6px;
  background: linear-gradient(45deg, #ccc, #999);
  top: -10px;
  opacity: 0.8;
  animation: fall 3s linear forwards;
  z-index: 9999;
}

.star {
  position: fixed;
  width: 4px;
  height: 4px;
  background: radial-gradient(circle, #fff 0%, #ccc 100%);
  border-radius: 50%;
  animation: sparkle 1.5s ease-out forwards;
}

@keyframes fall {
  to {
    transform: translateY(100vh) rotate(360deg);
    opacity: 0;
  }
}

@keyframes sparkle {
  0% { transform: scale(0); opacity: 0.8; }
  50% { transform: scale(1.5); opacity: 1; }
  100% { transform: scale(0); opacity: 0; }
}
/* === FIX: Extend black tab + section backgrounds full width === */
body {
  overflow-x: hidden;
  margin: 0;
  padding: 0;
  width: 100%;
  box-sizing: border-box;
}

 .tabs, footer, #journey.tab-content {
  width: 100%;
  max-width: 100%;
  margin-left: 0; /* remove calc(50%-50vw) for mobile */
  box-sizing: border-box;
}

/* Ensure tab bar spans edge-to-edge */
.tabs {
  justify-content: center;
  background-color: var(--bw-1);
  border-top: 2px solid var(--bw-1);
  border-bottom: 2px solid var(--bw-1);
  box-sizing: border-box;
}

/* Background for ‚Äújourney‚Äù section should stretch across */
#journey.tab-content {
  background-color: var(--bw-1);
  color: var(--bw-4);
  width: 100vw;
  margin-left: calc(50% - 50vw); /* ensures true full-bleed alignment */
  padding: 40px 0;
}

/* Optional: ensure footer also connects to both edges */
footer {
  width: 100vw;
  margin-left: calc(50% - 50vw);
      margin: 0;
    border-top: 0;
}
#home #sailor-moon {
  display: block; /* show only on home */
  margin: 20px auto;
}

.tab-content:not(#home) #sailor-moon {
  display: none !important; /* hide on all other tabs */
}
</style>
</head>
<body>
  <!-- üéì Invitation Launch Screen -->
<div id="launch-screen">
  <div class="invite-box">
    <h1>You‚Äôve Been Invited üéì</h1>
    <p>Tap to open Kim‚Äôs Graduation Website</p>
    <div class="envelope">‚úâÔ∏è</div>
  </div>
</div>

<header>
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet">
  <h1>Kim‚Äôs Graduation Website
    <img src="https://media.tenor.com/eGCjV7lEokoAAAAj/black-bow.gif" alt="black-bow">
<!-- Put this in your <head> -->
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
  
  </h1>
  <p>Bachelor of Science in Computer Engineering </p>
  <p>Elegant. Intelligent. Empowered by Jehovah </p>
</header>
<div class="tabs">
  <button class="tab" onclick="openTab('home')">Home</button>
  <button class="tab" onclick="openTab('dresscode')">Dress Code</button>
  <button class="tab" onclick="openTab('guestbook')">Guestbook</button>
  <button class="tab" onclick="openTab('photos')">Photos</button>
  <button class="tab" onclick="openTab('wishlist')">Gift Ideas</button>
  <button class="tab" onclick="openTab('journey')">My Journey</button>
</div>
<div id="main-content">
  <canvas class="journey-bg" id="journey-bg"></canvas>
  <div id="home" class="tab-content active">
    <h2>Welcome!</h2>
    <p>Thank you for celebrating this milestone with me! So happy to be able to say that all the obstacles I've overcome were well worth it it in the end.
       I'm incredibly grateful first and foremost to God and to my family for their continuous love and support. </p>
    <p> If you are reading this, you have been carefully selected to partake in this momentous occasion. I hope you enjoy exploring my little corner of 
      the web, and feel free to reach out to me or my family with any questions!
    </p>
<div id="invitation" style="margin-top:30px; margin-bottom: 0; text-align:center;">
  <p style=" font-style:italic;font-family:'Alumni Sans', sans-serif;">
  <strong>Love, <br>
  <strong>Kim</strong></strong></p>
  
  <!-- Smooth transition: slight fade or line -->
  <hr style="width:50px; border:1px solid #ccc; margin:10px auto 20px;">
  
  <p style="font-size:2rem; font-family:'Alumni Sans', sans-serif; color:#222;">
    You are cordially invited to celebrate my graduation!<br>
  <strong>Venue location will be shared privately upon RSVP:</strong><br>
  <strong>Date:</strong> Saturday, December 20, 2025<br>
  <strong>Time:</strong> 4:30 PM<br>
  <strong>Please contact me by email or text for more information:</strong><br>
  <strong>üìß kimannrojas04@gmail.com</a></strong>
</div>
  </p>
</div>
    
    <img src="https://64.media.tumblr.com/665bdf001227f8965f5f3446a51d85bd/978354f712040cbf-da/s1280x1920/151222224e31b2e2437f5ad629ebaebab1f4e7b3.gif" width="250" alt="Sailor Moon">
  </div>
  <div id="dresscode" class="tab-content">
    <h2> Dress Code</h2>
    <p>To honor the elegance of this special occasion, guests are kindly requested to observe a formal dress code. Attire should reflect sophistication and grace, with a refined color palette of black and white. Gentlemen are encouraged to wear dress shirts, tailored slacks, or a classic suit, while ladies are invited to wear dresses or other formal ensembles. We appreciate your thoughtful attention to this attire and for celebrating this milestone.</p>
    <img src="dresscode.jpg" alt="Dress Code Example" style="max-width:80%; border-radius:12px; margin-top:20px; border:2px solid #000;">    
  </div>
  <div id="guestbook" class="tab-content">
    <h2>üí¨ Guestbook</h2>
    <input id="nameInput" type="text" placeholder="Your name..."><br>
    <textarea id="messageInput" placeholder="Leave a sweet message for Kim..."></textarea><br>
    <button onclick="postMessage()">Post</button>
    <div id="messages"></div>
  </div>
  <div id="photos" class="tab-content">
    <h2> Share a Photo</h2>
    <input type="file" id="photoInput" accept="image/*"><br>
    <button id="uploadBtn" onclick="uploadPhoto()">Upload Photo üì∏</button>
    <div id="gallery"></div>
  </div>
<div id="wishlist" class="tab-content">
  <h2>Gift Registry</h2>
  <p>Thank you so much for your thoughtfulness! For those wishing to honor this special occasion with a gift, I have lovingly curated an <a href="https://www.amazon.com/hz/wishlist/ls/FB17XEUSTE2K?ref_=wl_share" target="_blank">Amazon Wishlist</a>.</p>
  <p>For your convenience, monetary gifts are also graciously and warmly welcomed, should you prefer this option.</p>
</div>
<div id="journey" class="tab-content">
  <h2 style="color:white;">üõ†Ô∏è My Journey</h2>

  <!-- Timeline container -->
  <div class="timeline-container">
    <div class="timeline">
      <div class="point" data-img="journey2.jpg" data-desc="2020 ‚Äì Engineering Fundamentals"></div>
      <div class="point" data-img="journey3.jpg" data-desc="2021 ‚Äì Coding Foundations üíª"></div>
      <div class="point" data-img="journey4.jpg" data-desc="2022 ‚Äì Digital Logic Design & Data Structures"></div>
      <div class="point" data-img="journey5.jpg" data-desc="2023 ‚Äì Circuits & Operating Systems"></div>
      <div class="point" data-img="journey6.jpg" data-desc="2024 ‚Äì Electronics & Microcontrollers"></div>
      <div class="point" data-img="journey7.jpg" data-desc="2025 ‚Äì Graduation! üéì"></div>
    </div>
  </div>

  <!-- Move journey display INSIDE the journey tab -->
  <div id="journey-display">
    <img id="journey-img" src="" alt="">
    <p id="journey-desc"></p>
  </div>
</div>
<!-- Lightbox -->
<div id="lightbox"><img id="lightbox-img" src=""></div>
<footer>
  <p>"Elegance is intelligence made visible."</p>
  <p>‚Äî Celebrating Grace & Code üéì</p>
</footer>
<!-- Achievement toast (Minecraft-like, pixel, B/W) -->
<div id="achievement-toast" aria-live="polite">
  <img src="white_trophy.gif" alt="achievement icon">
  <div class="text">
    <p class="title">Achievement Unlocked!</p>
    <p class="name" id="toast-name">Name</p>
  </div>
</div>
<!-- optional: achievement sound file (place in same folder or remove if not needed) -->
<audio id="achievement-sound" src="levelup.mp3" preload="auto"></audio>
<script type="module">
// -------------------- Firebase imports --------------------
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
import { getFirestore, collection, addDoc, getDocs, query, orderBy } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";
const firebaseConfig={apiKey:"AIzaSyBXrTc31-4bNMkdh4DTvLu29vBHOS66gEA",authDomain:"kim-s-grad-website.firebaseapp.com",projectId:"kim-s-grad-website"};
const app=initializeApp(firebaseConfig);
const db=getFirestore(app);
// -------------------- Achievement data + UI refs --------------------
const achievementsList = document.getElementById('achievements-list');
const achievements = {
  "Hello, World!": false,           //welcome page
  "Data Collector": false,    // upload photo
  "Logger": false,            // guestbook post
  "System Scanner": false,    // wishlist open
  "Process Tracker": false,   // hover journey point
  "Interface Designer": false, // open dresscode
  "Computer Engineer": false  //hidden achievement
};
// helper to create a pixel icon (keeps B/W)
function makeIconLetter(letter){
  const el = document.createElement('div');
  el.className = 'icon';
  el.textContent = letter || '';
  el.style.display = 'flex';
  el.style.alignItems = 'center';
  el.style.justifyContent = 'center';
  el.style.fontWeight = '900';
  el.style.fontSize = '14px';
  el.style.color = '#111';
  el.style.background = '#fff';
  return el;
}
// unlock animation(minecraft notif): toast + confetti + sidebar add
function unlockAchievement(name){
  if(achievements[name]) return; // already unlocked
  achievements[name] = true;
  // 1) add to sidebar as pixel tile
  const tile = document.createElement('div');
  tile.className = 'achievement';
  const label = document.createElement('div');
  label.className = 'label';
  label.textContent = name;
  const icon = makeIconLetter(name[0] || '‚úì'); // simple pixel icon
  tile.appendChild(icon);
  tile.appendChild(label);
  achievementsList.appendChild(tile);
  // 2) show pixel toast (Minecraft-like)
  const toast = document.getElementById('achievement-toast');
  const tname = document.getElementById('toast-name');
  tname.textContent = name;
  toast.classList.add('show');
  // 3) play sound if available, otherwise fallback oscillator
  const sound = document.getElementById('achievement-sound');
  if(sound && sound.src){
    sound.currentTime = 0;
    sound.play().catch(()=>{/* ignore autoplay block */});
  } else {
    // lightweight audio fallback
    try{
      const Ctx = window.AudioContext || window.webkitAudioContext;
      const ctx = new Ctx();
      const o = ctx.createOscillator();
      const g = ctx.createGain();
      o.type = 'square';
      o.frequency.value = 660;
      g.gain.value = 0.08;
      o.connect(g); g.connect(ctx.destination);
      o.start();
      o.stop(ctx.currentTime + 0.2);
    }catch(e){}
  }
  // 4) confetti (grey squares) + sparkles (white glows)
  spawnConfettiAndSparkles();

  // hide toast after a few seconds
  clearTimeout(toast._hideTimer);
  toast._hideTimer = setTimeout(()=>{ toast.classList.remove('show'); }, 3800);
  // --- CHECK HIDDEN ACHIEVEMENT ---
if (!achievements.hidden &&
    achievements["Hello, World!"] &&
    achievements["Data Collector"]&&
    achievements["Logger"] &&
    achievements["Interface Designer"] &&
    achievements["System Scanner"] &&
    achievements["Process Tracker"]){
  // Delay the unlock by 1 second (1000 ms)
  setTimeout(() => {
    unlockAchievement("Computer Engineer");
    achievements.Hidden = true;
  }, 5000);
}

}
// confetti + sparkle spawner
function spawnConfettiAndSparkles(){
  const count = 22;
  for(let i=0;i<count;i++){
    const c = document.createElement('div');
    c.className = 'confetti';
    const x = window.innerWidth - 220 + Math.random()*180;
    const y = 100 + Math.random()*120;
    c.style.left = x + 'px';
    c.style.top = y + 'px';
    c.style.width = 6 + Math.random()*6 + 'px';
    c.style.height = c.style.width;
    c.style.background = '#9e9e9e';
    c.style.opacity = 0.95;
    document.body.appendChild(c);
    // animate downward + rotate
    const fall = [
      { transform: `translateY(0) rotate(0deg)`, opacity:1 },
      { transform: `translateY(${80 + Math.random()*120}px) rotate(${Math.random()*360}deg)`, opacity:0 }
    ];
    const dur = 900 + Math.random()*900;
    c.animate(fall, { duration: dur, easing: 'cubic-bezier(.2,.6,.2,1)' });
    setTimeout(()=>c.remove(), dur+50);
    // also spawn small sparkle near same x
    if(Math.random() < 0.6){
      const s = document.createElement('div');
      s.className = 'sparkle';
      s.style.left = (x + (Math.random()*40-20)) + 'px';
      s.style.top = (y + (Math.random()*40-20)) + 'px';
      s.style.width = '6px';
      s.style.height = '6px';
      s.style.opacity = 1;
      s.style.boxShadow = '0 0 8px #fff, 0 0 14px rgba(255,255,255,0.6)';
      document.body.appendChild(s);
      const sparkleAnim = [
        { transform: 'scale(0.6)', opacity: 1 },
        { transform: 'scale(1.6)', opacity: 0 }
      ];
      s.animate(sparkleAnim, { duration: 600 + Math.random()*600, easing: 'ease-out' });
      setTimeout(()=>s.remove(), 900 + Math.random()*800);
    }
  }
}
// -------------------- Tabs --------------------
const mainContent = document.getElementById('main-content');
window.openTab = function(tabId){
  document.querySelectorAll('.tab-content').forEach(div => div.classList.remove('active'));
  document.getElementById(tabId).classList.add('active');
  if(tabId === 'journey') mainContent.classList.add('journey-active');
  else mainContent.classList.remove('journey-active');
  // unlockable actions on viewing tabs
  if(tabId === 'dresscode') unlockAchievement('Interface Designer');
  if(tabId === 'wishlist') unlockAchievement('System Scanner');
};
// -------------------- Guestbook --------------------
window.postMessage = async function(){
  const name = document.getElementById('nameInput').value.trim() || 'Anonymous';
  const message = document.getElementById('messageInput').value.trim();
  if(!message) return;
  await addDoc(collection(db, 'guestbook'), { name, text: message, date: new Date().toISOString() });
  document.getElementById('nameInput').value = '';
  document.getElementById('messageInput').value = '';
  await renderMessages();
  unlockAchievement('Logger');
};
async function renderMessages(){
  const container = document.getElementById('messages');
  container.innerHTML = '';
  const q = query(collection(db, 'guestbook'), orderBy('date', 'desc'));
  const snapshot = await getDocs(q);
  snapshot.forEach(doc => {
    const d = doc.data();
    const div = document.createElement('div');
    div.innerHTML = `<span class="bow">‚ô°</span><strong>${d.name}</strong> ‚Ä¢ <span style='color:#555;font-size:0.85em'>${new Date(d.date).toLocaleString()}</span><p>${d.text}</p>`;
    container.appendChild(div);
  });
}
// -------------------- Photos (Cloudinary upload) --------------------
window.uploadPhoto = async function(){
  const fileInput = document.getElementById('photoInput');
  const file = fileInput.files[0];
  if(!file) return alert('Please select a photo!');
  const cloudName = 'dhnsjcgko';
  const uploadPreset = 'Grad_2025_Gallery';
  const formData = new FormData(); formData.append('file', file); formData.append('upload_preset', uploadPreset);
  const uploadBtn = document.getElementById('uploadBtn'); uploadBtn.disabled = true; uploadBtn.textContent = 'Uploading... ‚è≥';
  try{
    const res = await fetch(`https://api.cloudinary.com/v1_1/${cloudName}/image/upload`, { method: 'POST', body: formData });
    const data = await res.json();
    if(!res.ok || !data.secure_url) throw new Error(data.error?.message || 'Upload failed');
    const url = data.secure_url;
    const gallery = document.getElementById('gallery');
    const img = document.createElement('img'); img.src = url; img.style.opacity = 0;
    gallery.prepend(img); setTimeout(()=> img.style.opacity = 1, 80);
    await addDoc(collection(db, 'photos'), { url, date: new Date().toISOString() });
    fileInput.value = ''; uploadBtn.textContent = 'Upload Photo üì∏'; uploadBtn.disabled = false;
    await renderGallery();
    unlockAchievement('Data Collector'); // unlock when photo uploaded
  }catch(err){
    console.error(err);
    alert('‚ùå Photo upload failed');
    uploadBtn.textContent = 'Upload Photo üì∏'; uploadBtn.disabled = false;
  }
};
async function renderGallery(){
  const gallery = document.getElementById('gallery');
  gallery.innerHTML = '';
  const q = query(collection(db, 'photos'), orderBy('date', 'desc'));
  const snapshot = await getDocs(q);
  snapshot.forEach(doc => {
    const img = document.createElement('img');
    img.src = doc.data().url;
    gallery.appendChild(img);
  });
  setupLightbox();
}
// -------------------- Lightbox --------------------
function setupLightbox(){
  const lightbox = document.getElementById('lightbox');
  const lightboxImg = document.getElementById('lightbox-img');
  document.querySelectorAll('#gallery img').forEach(img => {
    img.onclick = () => { lightbox.style.display = 'flex'; lightboxImg.src = img.src; };
  });
  lightbox.onclick = (e) => { if(e.target !== lightboxImg) lightbox.style.display = 'none'; }
}
// -------------------- Cursor trail (kept intact) --------------------
const blackBow='https://media.tenor.com/eGCjV7lEokoAAAAj/black-bow.gif';
const whiteBow='invertedwhitebow.gif'; // keep this in your folder or change to a hosted white-gif

function getBgColor(elem){
  while(elem){
    const color = window.getComputedStyle(elem).backgroundColor;
    if(color && color !== 'rgba(0, 0, 0, 0)' && color !== 'transparent') return color;
    elem = elem.parentElement;
  }
  return 'rgb(255,255,255)';
}
function getLuminance(rgb){
  const m = rgb.match(/(\d+),\s*(\d+),\s*(\d+)/);
  if(!m) return 255;
  const r = parseInt(m[1]), g = parseInt(m[2]), b = parseInt(m[3]);
  return 0.299*r + 0.587*g + 0.114*b;
}
document.addEventListener('mousemove', e => {
  const img = document.createElement('img');
  img.src = (getLuminance(getBgColor(document.elementFromPoint(e.clientX, e.clientY))) < 128) ? whiteBow : blackBow;
  img.style.position = 'absolute';
  img.style.left = e.pageX - 12 + 'px';
  img.style.top = e.pageY - 12 + 'px';
  img.style.width = '25px';
  img.style.height = '25px';
  img.style.pointerEvents = 'none';
  img.style.zIndex = 9999;
  img.style.transition = 'transform 1s ease-out, opacity 1s ease-out';
  img.style.opacity = '1';
  document.body.appendChild(img);
  setTimeout(()=>{ img.style.opacity='0'; img.style.transform='scale(0.6) rotate(20deg)'; setTimeout(()=>img.remove(),1000); }, 0);
});

document.addEventListener('touchmove', e => {
  const touch = e.touches[0];
  if(!touch) return;

  const img = document.createElement('img');
  img.src = (getLuminance(getBgColor(document.elementFromPoint(touch.clientX, touch.clientY))) < 128) ? whiteBow : blackBow;
  img.style.position = 'absolute';
  img.style.left = touch.pageX - 12 + 'px';
  img.style.top = touch.pageY - 12 + 'px';
  img.style.width = '25px';
  img.style.height = '25px';
  img.style.pointerEvents = 'none';
  img.style.zIndex = 9999;
  img.style.transition = 'transform 1s ease-out, opacity 1s ease-out';
  img.style.opacity = '1';
  document.body.appendChild(img);
  setTimeout(() => {
    img.style.opacity = '0';
    img.style.transform = 'scale(0.6) rotate(20deg)';
    setTimeout(() => img.remove(), 1000);
  }, 0);
}, { passive: true }); // passive: true allows finger scrolling


// -------------------- Timeline points (unlock on hover) --------------------
const timelinePoints = document.querySelectorAll('.point');
timelinePoints.forEach(point => {
  point.addEventListener('mouseenter', () => {
    const img = document.getElementById('journey-img');
    const desc = document.getElementById('journey-desc');
    img.src = point.getAttribute('data-img');
    desc.textContent = point.getAttribute('data-desc');
    img.style.display = 'block';
    unlockAchievement('Process Tracker');
  });

  point.addEventListener('mouseleave', () => {
    const img = document.getElementById('journey-img');
    const desc = document.getElementById('journey-desc');
    img.style.display = 'none';
    desc.textContent = '';
  });
});

function positionLEDsInsidePoints() {
  const points = document.querySelectorAll('.point');

  // Remove old LEDs
  document.querySelectorAll('.point .timeline-led').forEach(l => l.remove());

  points.forEach(point => {
    const led = document.createElement('div');
    led.className = 'timeline-led';
    led.style.position = 'absolute';
    led.style.zIndex = '0'; // behind point
    led.style.width = '16px';
    led.style.height = '16px';
    
    // Position LED centered inside point
    led.style.left = '50%';
    led.style.top = '50%';
    led.style.transform = 'translate(-50%, -50%)';

    point.appendChild(led); // append LED inside the point
  });
}

positionLEDsInsidePoints();
window.addEventListener('resize', positionLEDsInsidePoints);
let pulseTime = 0;
function pulseTimelineLEDsSmooth(timestamp){
  const leds = document.querySelectorAll('.timeline-led');
  if(leds.length === 0) return;

  pulseTime += 0.02; // speed of pulse
  leds.forEach((led, i)=>{
    const phase = (i / leds.length) * Math.PI * 2;
    const scale = 1 + 0.3 * Math.sin(pulseTime + phase);
    const opacity = 0.3 + 0.7 * Math.sin(pulseTime + phase) ** 2;
    led.style.transform = `translate(-50%, -50%) scale(${scale})`;
    led.style.opacity = opacity;
    // optional: animate box-shadow for glow intensity
    const glow = 6 + 6 * Math.sin(pulseTime + phase);
    led.style.boxShadow = `0 0 ${14+glow}px ${glow}px rgba(255,255,255,0.5)`;
  });

  requestAnimationFrame(pulseTimelineLEDsSmooth);
}

requestAnimationFrame(pulseTimelineLEDsSmooth);


// -------------------- Canvas 'PCB' (keeps visuals) --------------------
const canvas = document.getElementById('journey-bg');
const ctx = canvas?.getContext ? canvas.getContext('2d') : null;
let particles = [];
function resizeCanvas(){
  if(!canvas) return;
  canvas.width = document.getElementById('main-content').offsetWidth;
  canvas.height = document.getElementById('main-content').offsetHeight;
  generateParticles();
  drawPCB();
}
window.addEventListener('resize', resizeCanvas);
function generateParticles(){
  particles = [];
  for(let i=0;i<50;i++){
    particles.push({ x: Math.random()*canvas.width, y: Math.random()*canvas.height, length: 20+Math.random()*50, vertical: Math.random()<0.5, speed:1+Math.random()*1.5});
  }
}
function drawPCB(){
  if(!ctx) return;
  ctx.clearRect(0,0,canvas.width,canvas.height);
  for(const p of particles){
    ctx.strokeStyle = 'rgba(255,255,255,' + (0.9 + Math.random()*0.12) + ')';
    ctx.lineWidth = 1 + Math.random()*1;
    ctx.beginPath();
    if(p.vertical) ctx.moveTo(p.x,p.y), ctx.lineTo(p.x,p.y+p.length);
    else ctx.moveTo(p.x,p.y), ctx.lineTo(p.x+p.length,p.y);
    ctx.stroke();
  }
}
function animatePCB(){
  drawPCB();
  for(const p of particles){
    if(p.vertical){ p.y += p.speed; if(p.y > canvas.height) p.y = -p.length; }
    else { p.x += p.speed; if(p.x > canvas.width) p.x = -p.length; }
  }
  requestAnimationFrame(animatePCB);
}
animatePCB();
// -------------------- Init on load --------------------
window.onload = () => {
  renderMessages();
  renderGallery();
  resizeCanvas();

};
// --- Invitation Launch Screen ---
const launchScreen = document.getElementById('launch-screen');
launchScreen.addEventListener('click', () => {
  launchScreen.style.animation = 'fadeOut 1s forwards';
  setTimeout(() => {
    launchScreen.remove();
    unlockAchievement('Hello, World!'); // trigger welcome achievement
  }, 500);
});

</script>
<!-- üéÆ Minecraft-style Achievement Sidebar -->
<div id="achievement-sidebar">
  <div id="achievements-unlocked">
    <h3>Achievements</h3>
    <div id="achievements-list"></div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="achievement-list"></div>
</div>

<!-- Popup for unlock -->
<div id="achievement-popup">
  <div id="achievement-popup-inner">
    <span id="achievement-popup-title">Achievement Get!</span>
    <span id="achievement-popup-text"></span>
  </div>
</div>
</body>
</html>

























